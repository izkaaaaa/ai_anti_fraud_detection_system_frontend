# **å¯’å‡åç«¯å¼€å‘æ—¥æ—¥å¿—

## 2026/1/15

1. ### **websocketé‰´æƒ**

   æ“ä½œï¼š

   åœ¨websocket_endpointä¸­ï¼Œè§£æQuery Parameterä¸­çš„tokenï¼Œè°ƒç”¨ app.core.security.decode_access_tokenéªŒè¯èº«ä»½ï¼Œç¡®è®¤user_idä¸tokenåŒ¹é…åæ‰å…è®¸ await websocket.accept()ã€‚

   æ„ä¹‰ï¼š

   ï¼ˆ1ï¼‰å¼•å…¥äº† `token` å‚æ•°ï¼ˆé€šè¿‡ URL Query ä¼ é€’ï¼‰ï¼Œå¹¶ä½¿ç”¨ç³»ç»Ÿç°æœ‰çš„ JWT æœºåˆ¶è¿›è¡ŒéªŒè¯ã€‚

   ï¼ˆ2ï¼‰ä»**å®¢æˆ·ç«¯è¯·æ±‚ -> æœåŠ¡ç«¯ç›´æ¥æ¥å— (`accept`) -> è¿æ¥å»ºç«‹æˆåŠŸ** å˜æˆ

   å®¢æˆ·ç«¯è¯·æ±‚ -> æœåŠ¡ç«¯æ ¡éªŒ Token -> **æ ¡éªŒé€šè¿‡** -> æœåŠ¡ç«¯æ¥å— (`accept`) -> è¿æ¥å»ºç«‹æˆåŠŸã€‚

   å®¢æˆ·ç«¯è¯·æ±‚ -> æœåŠ¡ç«¯æ ¡éªŒ Token -> **æ ¡éªŒå¤±è´¥ï¼ˆæ— æ•ˆæˆ–ä¸åŒ¹é…**ï¼‰ -> æœåŠ¡ç«¯æ‹’ç»è¿æ¥ (å…³é—­ä»£ç  1008) -> è¿æ¥å»ºç«‹å¤±è´¥ã€‚

   æµ‹è¯•ï¼š

   ç¼–å†™ test_register_with_username.py æµ‹è¯•

   ![image-20260115090904346](C:\Users\Ye\AppData\Roaming\Typora\typora-user-images\image-20260115090904346.png)

   ï¼ˆ1ï¼‰å¸¦æ­£ç¡® Token çš„ç”¨æˆ·å¯ä»¥æ­£å¸¸è¿æ¥ã€‚

   ï¼ˆ2ï¼‰ä¸å¸¦ Token çš„è¿æ¥è¯·æ±‚è¢«æ­£ç¡®æ‹’ç»ï¼ˆè§¦å‘äº†ä¿®æ­£åçš„ 1008/Field required æ–­è¨€ï¼‰ã€‚

   ï¼ˆ3ï¼‰ä¼ªé€ æˆ–è¿‡æœŸçš„ Token è¢«æ‹’ç»ã€‚

   ï¼ˆ4ï¼‰Token æœ‰æ•ˆä½†å±äºå…¶ä»–ç”¨æˆ·ï¼ˆè¶Šæƒè®¿é—®ï¼‰è¢«æ‹’ç»ã€‚

   

2. ### **ç”Ÿäº§çº§æ—¥å¿—ç³»ç»Ÿæ”¹é€ **

   æ“ä½œï¼š

   å…¨å±€é…ç½®ï¼šåœ¨ app/core ä¸‹æ–°å»º logger.pyï¼Œé…ç½®æ—¥å¿—æ ¼å¼ï¼ˆåŒ…å«æ—¶é—´ã€æ–‡ä»¶åã€è¡Œå·ã€æ—¥å¿—çº§åˆ«ï¼‰ã€‚å»ºè®®ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ JSON æ ¼å¼ä»¥ä¾¿ ELK ç­‰å·¥å…·è§£æã€‚

   å…¨é‡æ›¿æ¢ï¼šæœç´¢å…¨é¡¹ç›®çš„ print è¯­å¥ï¼Œæ›¿æ¢ä¸º logger.info()ã€logger.error() ç­‰ã€‚

   ä¸Šä¸‹æ–‡æ³¨å…¥ï¼šåœ¨ AI æ¨ç†å’Œ WebSocket å¤„ç†çš„æ—¥å¿—ä¸­ï¼Œå¿…é¡»å¸¦ä¸Š call_id å’Œ user_idã€‚ä¾‹å¦‚ï¼šlogger.warning(f"æ£€æµ‹åˆ°ä¼ªé€ è§†é¢‘ | call_id={call_id} | confidence={score}")ï¼Œä»¥ä¾¿äº‹åå›æº¯æŸæ¬¡é€šè¯çš„å®Œæ•´æ£€æµ‹é“¾è·¯ã€‚

   æ–°å¢ï¼šå°†æ—¥å¿—æ“ä½œå…¨éƒ¨è®°å½•åœ¨/logs/app.logæ–‡ä»¶ä¸­ã€‚

   æµ‹è¯•ï¼š

   Database transaction failed, rolling back: [{'type': 'string_too_short', ... 'msg': 'String should have at least 6 characters' ...}]

   INFO:     127.0.0.1:61691 - "POST /api/users/login HTTP/1.1" 401 Unauthorized

   èƒ½å¤Ÿå®Œæˆç»“æ„åŒ–è¾“å‡ºå’Œæ‰“å°æ—¥å¿—ï¼ŒåŸºæœ¬ä¸Šå…¨é‡æ›¿æ¢äº†print

3. ### **æ•æ„Ÿé…ç½®ç®¡ç†** 

   æ“ä½œï¼š

   ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå¿…é¡»ç¡®ä¿ç¯å¢ƒå˜é‡ï¼ˆ.envï¼‰å¼ºåˆ¶è¦†ç›–è¿™äº›é»˜è®¤å€¼ï¼Œåœ¨ä»£ç ä¸­ç§»é™¤é»˜è®¤å€¼ï¼Œè®¾ä¸º ... æˆ–æŠ›å‡ºå¼‚å¸¸ï¼Œé˜²æ­¢éƒ¨ç½²æ—¶å¿˜è®°é…ç½®è€Œä½¿ç”¨å¼±å¯†é’¥ã€‚

   ç³»ç»Ÿå¯†é’¥éƒ½åœ¨æˆ‘çš„.envæ–‡ä»¶ä¸­ã€‚

   

## **2026/1/16 - 2026/1/17**

## **è®ºæ–‡ç ”ç©¶**

### è®ºæ–‡é€‰å–

[1] M. Usama Tanveer Gujjar, K. Munir, M. Amjad, A. U. Rehman and A. Bermak, "Unmasking the Fake: Machine Learning Approach for Deepfake Voice Detection," in IEEE Access, vol. 12, pp. 197442-197453, 2024, doi: 10.1109/ACCESS.2024.3521026.

(è¿™ä¸ªæ˜¯fake soundæ£€æµ‹)

åŸºäºæ·±åº¦å±‚å’Œç»Ÿè®¡å±‚çš„åŠ æƒè®¡ç®—

[2] Lei, Y. Application of improved GAN-LSTM-based fake face detection technique in electronic data forensics. *Discov Artif Intell* **5**, 418 (2025).

(è¿™ä¸ªæ˜¯fake faceæ£€æµ‹)

å…·ä½“ç‰¹è‰²ä¸é€‰å–åŸå› è§â€œfake sound æ£€æµ‹æ¨¡å‹è®¾è®¡æ–¹æ¡ˆ.mdâ€  "fake faceæ£€æµ‹æ¨¡å‹è®¾è®¡æ–¹æ¡ˆ.md"



## 2026/1/18 - 2026/1/19

æœŸé—´è¿›è¡Œå¤§é‡åç«¯æ”¹å†™ä»¥é€‚é…å¯¹æ¥æ¨¡å‹



## 2026/1/20

#### 1.fake soundæ£€æµ‹æ¨¡å‹

##### 1.1 é€‰å–æ•°æ®é›†

â€‹    ä½¿ç”¨å…¬å¼€æ•°æ®é›†ASVspoof2019_LA è¿›è¡Œè®­ç»ƒå’Œè°ƒæ•´ï¼Œä½¿ç”¨ASVspoof2021æ•°æ®é›†è¿›è¡Œæµ‹è¯•

â€‹    ASVspoof2019_PA æ•°æ®é›†å°šæœª

##### 1.2 æ•ˆæœé¢„æœŸ

â€‹    ï¼ˆ1ï¼‰å¯¹äºaiæ¨¡æ‹ŸçœŸäººå£°éŸ³å…·æœ‰é«˜è¯†åˆ«åº¦ï¼Œç½®ä¿¡åº¦è®¾è®¡é‡‡ç”¨æ·±åº¦å±‚å’Œç»Ÿè®¡å±‚åŠ æƒè®¡ç®—ï¼ˆæƒé‡æš‚å®šä¸º0.5ï¼‰

â€‹    ï¼ˆ2ï¼‰å¯¹äºä¸­æ–‡aiä»¿å£°æ”»å‡»èƒ½å¤Ÿè¯†åˆ«å¹¶é˜²å¾¡ï¼ˆæœ€æ‹…å¿ƒçš„ä¸€ç‚¹ï¼Œå› ä¸ºè®­ç»ƒä½¿ç”¨çš„ä¸ºå…¬å¼€è‹±æ–‡æ•°æ®é›†ï¼Œå°šæœªæ‰¾åˆ°å¼€æºå¤§å‹ä¸­æ–‡æ•°æ®é›†ï¼‰

â€‹    ï¼ˆ3ï¼‰å¯¹äºæŠ—é‡æ”¾æ”»å‡»èƒ½æœ‰ä¸€å®šçš„é¢„é˜²èƒ½åŠ›ï¼ˆä½¿ç”¨ASVspoof2019_PA æ•°æ®é›†è¿›è¡Œè®­ç»ƒï¼Œæš‚æœªå®Œæˆï¼‰

##### 1.3 æ¨¡å‹è®­ç»ƒæ–¹æ¡ˆ

â€‹    è¯¦æƒ…è¯·è§â€œfake sound æ£€æµ‹æ¨¡å‹è®¾è®¡æ–¹æ¡ˆ.mdâ€ 

##### 1.4 æ•ˆæœæµ‹è¯•

â€‹    å¯¹äºä½¿ç”¨ä¸­æ–‡äººå£°å’Œaiæ¨¡æ‹Ÿå£°éŸ³èƒ½å¤Ÿè¾ƒå¥½åŒºåˆ«

ï¼ˆ1ï¼‰aåŒå­¦æœ¬äººå£°éŸ³ä¸å°çˆ±åŒå­¦è®­ç»ƒåçš„å£°éŸ³ï¼Œç³»ç»Ÿè¯†åˆ«å¦‚ä¸‹ï¼š

![d98818eef941124158add3aec425f2e3](C:\Users\Ye\Documents\Tencent Files\2673418675\nt_qq\nt_data\Pic\2026-01\Ori\d98818eef941124158add3aec425f2e3.png)



ï¼ˆ2ï¼‰båŒå­¦æœ¬äººå£°éŸ³ä¸deepfakeæ¨¡æ‹Ÿå£°éŸ³ï¼Œç³»ç»Ÿè¯†åˆ«å¦‚ä¸‹ï¼š

![26ad5dc9797bc207d82797ad987e4eef](C:\Users\Ye\Documents\Tencent Files\2673418675\nt_qq\nt_data\Pic\2026-01\Ori\26ad5dc9797bc207d82797ad987e4eef.png)

å¯è§å¯¹äºçœŸäººä¸aiå…‹éš†å£°éŸ³ï¼Œæ¨¡å‹èƒ½é€šè¿‡åˆ†æ•°åŠ æƒè¾ƒä¸ºå‡†ç¡®åˆ¤æ–­å‡ºä¼ªé€ ä¸å¦ã€‚

##### 1.5 åç«¯é›†æˆå·¥ä½œ

ï¼ˆ1ï¼‰ä¿®æ”¹config.pyä¸­æ·±åº¦å±‚å’Œç»Ÿè®¡å±‚çš„æƒé‡

ï¼ˆ2ï¼‰ä¿®æ”¹taskæ‰§è¡Œè¿‡ç¨‹ï¼Œè®©redisæˆä¸ºwebsocketäº¤æµçš„ä¸­ä»‹

ï¼ˆ3ï¼‰ä¿®æ”¹model\model_services



## 2026/1/21 - 2026/1/22

#### 2.fake faceæ£€æµ‹æ¨¡å‹

##### 2.1 é€‰å–æ•°æ®é›†

â€‹    é€‰ç”¨ç”³è¯·åˆ¶æ•°æ®é›†FaceForensics++ï¼Œå«real video 1360æ¡ï¼Œfake videoåŸºäºdeepfakeã€faceshifterã€face2faceç­‰è¿‘10000æ¡

â€‹    æœ¬è½®å¼€å‘é€‰å–æ•°æ®é›†real video 1360æ¡ã€deepfake 1040æ¡è¿›è¡Œrealï¼šfake=1ï¼š1çš„æ¯”ä¾‹è¿›è¡Œè®­ç»ƒ

##### 2.2æ•ˆæœé¢„æœŸ

ï¼ˆ1ï¼‰åœ¨å¾®ä¿¡è§†é¢‘/qqè§†é¢‘/facetimeç­‰ä½¿ç”¨åœºæ™¯ä¸‹èƒ½å¤Ÿæ£€æµ‹è™šå‡è§†é¢‘

ï¼ˆ2ï¼‰èƒ½å¯¹æ¢è„¸è¯ˆéª—è§†é¢‘è¿›è¡Œå‰–æå’Œæ£€éªŒ

##### 2.3æ¨¡å‹è®­ç»ƒæ–¹æ¡ˆ

â€‹    è¯¦æƒ…è¯·è§â€œfake faceæ£€æµ‹æ¨¡å‹è®¾è®¡æ–¹æ¡ˆ.mdâ€

##### 2.4æ•ˆæœæµ‹è¯•

ï¼ˆ1ï¼‰æ¨¡æ‹Ÿè™šå‡è§†é¢‘é€šè¯

![image-20260122004938200](C:\Users\Ye\AppData\Roaming\Typora\typora-user-images\image-20260122004938200.png)

ï¼ˆ2ï¼‰æ¨¡æ‹ŸçœŸå®è§†é¢‘é€šè¯

![image-20260122004955595](C:\Users\Ye\AppData\Roaming\Typora\typora-user-images\image-20260122004955595.png)

æ³¨ï¼šæµ‹è¯•æ•°æ®é›†åŸºäºçœŸäººdeepfakeè®­ç»ƒï¼Œå¯¹äºç›®å‰å¸‚é¢ä¸Šé¡¶å°–çº¯aiç”Ÿæˆçš„è§†é¢‘æ£€æµ‹æ•ˆæœè¾ƒå·®ï¼ˆå› ä¸ºè®­ç»ƒæ—¶ä¾§é‡äºçœ¼è§’ã€å˜´å”‡ã€çœ¼çƒç­‰aiå®æ—¶æ¢è„¸äº§ç”Ÿçš„å™ªç‚¹ä¸ä¸è¿è´¯æ¥è®­ç»ƒï¼Œè€Œçº¯aiç”Ÿæˆè§†é¢‘è¿™äº›éƒ¨åˆ†è¾ƒä¸ºå®Œç¾ï¼Œç³»ç»Ÿåˆ¤æ–­å¯èƒ½ä¼šå‡ºç°é”™è¯¯ï¼Œä½†æ˜¯è¯­éŸ³è¯†åˆ«æ€»èƒ½æŠ“ä½aiç”Ÿæˆç—•è¿¹ï¼Œæ”¹è¿›è§æ¨¡å‹é˜²æŠ–ï¼‰

##### 1.5 åç«¯é›†æˆå·¥ä½œ

ï¼ˆ1ï¼‰ä¿®æ”¹config.pyä¸­è§†é¢‘é˜ˆå€¼

ï¼ˆ2ï¼‰ä¿®æ”¹model/model_servicesä¸­çš„predict_videoå‡½æ•°



## 2026/1/29 - 2026/1/31

### æ¨¡å‹é˜²æŠ–

**è§£å†³è·³å˜** ï¼šå¦‚æœæ¨¡å‹è¾“å‡ºæ˜¯ä¸ç¨³å®šçš„ `[Fake, Real, Fake, Fake, Real]`ï¼Œç›´æ¥è¾“å‡ºä¼šè®©ç”¨æˆ·å›°æƒ‘ã€‚

- **æ»‘åŠ¨çª—å£ç®—æ³•**ï¼šæˆ‘ä»¬æŠŠè¿™ä¸€ä¸²ç»“æœå­˜å…¥ Redis Listã€‚
- **åˆ¤å®šé€»è¾‘**ï¼šåªæœ‰ 5 æ¬¡é‡Œæœ‰ 3 æ¬¡æ˜¯ Fakeï¼Œ`fake_count` æ‰ä¼š >= 3ï¼Œæ‰ä¼šè§¦å‘æŠ¥è­¦ã€‚

ç®—æ³•é€‰æ‹©ï¼šæ»‘åŠ¨çª—å£+çŠ¶æ€æœº

çŠ¶æ€æœºè®¾è®¡çš„æ ¸å¿ƒç›®çš„æ˜¯**â€œä¸¥æ ¼è¿›å…¥ï¼Œè°¨æ…é€€å‡ºâ€**ï¼Œä»¥æ­¤æ¥å®ç°é˜²æŠ–

è½¬æ¢è§„åˆ™å¦‚ä¸‹ï¼ˆåŸºäºçª—å£å¤§å° 5ï¼‰ï¼š

**graph LR
    SAFE((ğŸŸ¢ SAFE)) -- "fake_count >= 3" --> ALARM((ğŸ”´ ALARM))
    ALARM -- "fake_count <= 1" --> SAFE

    graph LR
        SAFE((ğŸŸ¢ SAFE)) -- "fake_count >= 3" --> ALARM((ğŸ”´ ALARM))
        ALARM -- "fake_count <= 1" --> SAFE
        
        SAFE -- "fake_count <= 2" --> SAFE
        ALARM -- "fake_count >= 2" --> ALARM

**å¦‚æœæ˜¯ä» SAFE å‡ä¸Šæ¥çš„ 2**ï¼šä¿æŒ SAFE

**å¦‚æœæ˜¯ä» ALARM é™ä¸‹æ¥çš„ 2**ï¼šä¿æŒ ALARM
![image-20260131105618621](C:\Users\Ye\AppData\Roaming\Typora\typora-user-images\image-20260131105618621.png)

è¿‡ç¨‹ä¸­æ£€æµ‹åˆ°é€ å‡å³æŒç»­æŠ¥è­¦

<2åè§£é™¤æŠ¥è­¦



## 2026/2/1

### æŠ¥è­¦æ¨é€æœºåˆ¶

#### 1.ç®€ä»‹

(1)æŠ¥è­¦æ¨é€å®Œå–„ send_personal_messageï¼ŒåŒºåˆ†ä¸åŒç±»å‹è­¦å‘Šï¼Œè®©å‰ç«¯å¼¹çª—

(2)é€šè¯è®°å½•åœ¨ä¸ªäººçš„æ¶ˆæ¯æ—¥å¿—æ•°æ®åº“ä¸­ï¼Œè‹¥æ£€æµ‹åˆ°ä¸­é«˜é£é™©çš„é€šè¯ï¼Œåˆ™ç«‹å³å‘é€çŸ­ä¿¡æ¶ˆæ¯ç»™å®¶åº­ç»„çš„ç®¡ç†å‘˜ï¼ŒåŒæ—¶å¦‚æœæ˜¯ä¸­ä½é£é™©çš„æŠ¥è­¦åˆ™å°†æ•°æ®å­˜å‚¨ï¼Œè¿›è¡Œäº‹åå®¡è®¡ï¼Œè‹¥æ£€æµ‹å‡ºé€šè¯ä½œå‡åˆ™äº‹åå†æé†’ã€‚



**ç°æœ‰åç«¯äº¤äº’é€»è¾‘ï¼š**

- **Celery Task**: `æ£€æµ‹å®Œæˆ` -> `è°ƒç”¨ NotificationService.handle_result`
- **NotificationService** (è¿è¡Œåœ¨ Celery ä¸­):
  1. `åˆ¤æ–­é£é™©ç­‰çº§`
  2. `å†™å…¥æ•°æ®åº“ (MessageLog)`
  3. `å‘é€çŸ­ä¿¡ (å¦‚æœæ˜¯é«˜å±)`
  4. `è°ƒç”¨ self.redis.publish` (**è¿™é‡ŒæŠŠæ¶ˆæ¯å‘ç»™äº† Redis**)
- **Main Process**: `Redis Listener` -> `WebSocket Manager` -> `å‰ç«¯`
